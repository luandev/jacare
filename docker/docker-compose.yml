
services:
  jacare:
    # Use the pre-built image from GitHub Container Registry
    image: ghcr.io/luandev/jacare:latest
    # Or build from local repository (uncomment build section and comment image line above)
    # build:
    #   context: ..
    #   dockerfile: apps/server/Dockerfile
    restart: unless-stopped
    ports:
      - "3333:3333" # Jacare server/API and web UI
    environment:
      CROCDESK_DATA_DIR: /data
      CROCDESK_USE_ABSOLUTE_PATHS: "true"
    volumes:
      # Windows default: bind your download and library folders into the container.
      # IMPORTANT: On Linux/macOS, ensure proper ownership: chown -R 1001:1001 /path/to/data
      # The container runs as UID 1001 (user 'jacare') and needs write access to /data
      - type: bind
        source: C:/Users/<you>/jacare/data
        target: /data
      - type: bind
        source: C:/Users/<you>/jacare/library
        target: /library
      - type: bind
        source: C:/Users/<you>/jacare/downloads
        target: /downloads
      # macOS example paths:
      # - type: bind
      #   source: /Users/<you>/jacare/data
      #   target: /data
      # - type: bind
      #   source: /Users/<you>/jacare/library
      #   target: /library
      # - type: bind
      #   source: /Users/<you>/jacare/downloads
      #   target: /downloads
      # Linux example paths:
      # - type: bind
      #   source: /home/<you>/jacare/data
      #   target: /data
      # - type: bind
      #   source: /home/<you>/jacare/library
      #   target: /library
      # - type: bind
      #   source: /home/<you>/jacare/downloads
      #   target: /downloads

  # Emulator examples (disabled by default). These services expect ROMs under /library
  # and can be linked via Jacare's launcher settings. Uncomment the services you need
  # and map any additional ports required by your setup.

  # retroarch:
  #   image: ghcr.io/libretro/retroarch:latest
  #   restart: unless-stopped
  #   volumes:
  #     - type: bind
  #       source: C:/Users/<you>/crocdesk/library
  #       target: /library
  #     # macOS/Linux examples:
  #     # - type: bind
  #     #   source: /Users/<you>/crocdesk/library
  #     #   target: /library
  #     # - type: bind
  #     #   source: /home/<you>/crocdesk/library
  #     #   target: /library
  #   command: ["retroarch"]

  # dolphin:
  #   image: ghcr.io/dolphin-emu/dolphin:latest
  #   restart: unless-stopped
  #   volumes:
  #     - type: bind
  #       source: C:/Users/<you>/crocdesk/library
  #       target: /library
  #   # macOS/Linux examples:
  #   # - type: bind
  #   #   source: /Users/<you>/crocdesk/library
  #   #   target: /library
  #   # - type: bind
  #   #   source: /home/<you>/crocdesk/library
  #   #   target: /library
  #   command: ["dolphin-emu", "--batch"]

  # pcsx2:
  #   image: ghcr.io/pcsx2/pcsx2:latest
  #   restart: unless-stopped
  #   volumes:
  #     - type: bind
  #       source: C:/Users/<you>/crocdesk/library
  #       target: /library
  #   # macOS/Linux examples:
  #   # - type: bind
  #   #   source: /Users/<you>/crocdesk/library
  #   #   target: /library
  #   # - type: bind
  #   #   source: /home/<you>/crocdesk/library
  #   #   target: /library
  #   command: ["pcsx2", "--portable"]
